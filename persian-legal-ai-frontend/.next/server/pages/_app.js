(()=>{var e={};e.id=888,e.ids=[888],e.modules={6814:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>c});var i=r(997),a=r(9752),o=r(6689),u=r(8324),n=r(6317);r(108);var l=e([a]);function c({Component:e,pageProps:t}){let[r]=(0,o.useState)(()=>new a.QueryClient({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}));return i.jsx(a.QueryClientProvider,{client:r,children:i.jsx(u.J,{children:i.jsx(n.Ho,{children:i.jsx(e,{...t})})})})}a=(l.then?(await l)():l)[0],s()}catch(e){s(e)}})},6317:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>u,aC:()=>n});var s=r(997),i=r(6689),a=r(1163);let o=(0,i.createContext)(void 0);function u({children:e}){let[t,r]=(0,i.useState)(null),[u,n]=(0,i.useState)(!0),l=(0,a.useRouter)(),c=async(e,t)=>{try{n(!0);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(s.ok){let e=await s.json();return localStorage.setItem("authToken",e.token),r({id:e.user.id,name:e.user.name,email:e.user.email,role:e.user.role,avatar:e.user.avatar,permissions:e.user.permissions||[],lastLogin:new Date,isActive:e.user.is_active}),!0}{let e=await s.json();throw Error(e.message||"ورود ناموفق")}}catch(e){return console.error("Login failed:",e),!1}finally{n(!1)}};return s.jsx(o.Provider,{value:{user:t,isLoading:u,isAuthenticated:!!t,login:c,logout:()=>{localStorage.removeItem("authToken"),r(null),l.push("/auth/login")},updateUser:e=>{t&&r({...t,...e})},hasPermission:e=>!!t&&(t.permissions.includes(e)||"admin"===t.role),hasRole:e=>!!t&&(t.role===e||"admin"===t.role)},children:e})}function n(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8324:(e,t,r)=>{"use strict";r.d(t,{J:()=>o,M:()=>u});var s=r(997),i=r(6689);let a=(0,i.createContext)(void 0);function o({children:e}){let[t,r]=(0,i.useState)(!0),[o,u]=(0,i.useState)("light"),[n,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[m,h]=(0,i.useState)("fa"),p=e=>{d(t=>t.filter(t=>t.id!==e))};return s.jsx(a.Provider,{value:{sidebarOpen:t,setSidebarOpen:r,theme:o,setTheme:u,loading:n,setLoading:l,notifications:c,addNotification:e=>{let t={...e,id:Math.random().toString(36).substr(2,9),timestamp:new Date};d(e=>[t,...e]),0!==e.duration&&setTimeout(()=>{p(t.id)},e.duration||5e3)},removeNotification:p,language:m,setLanguage:h},children:e})}function u(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useUIContext must be used within a UIProvider");return e}},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[567,163],()=>r(6814));module.exports=s})();